
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=0" />
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <title>新学说</title>
    <link rel="stylesheet" type="text/css" href="//livestatic.videocc.net/v_92/assets/wcss/iconfont.css" />

    <link rel="stylesheet" type="text/css" href="//livestatic.videocc.net/v_92/assets/wcss/watch.pptClient.css">
    <link rel="stylesheet" type="text/css" href="//livestatic.videocc.net/v_92/assets/wcss/watch.pptClient.mobile.css">
    <link rel="stylesheet" type="text/css" href="//livestatic.videocc.net/v_92/assets/wjs/OwlCarousel2/dist/assets/owl.carousel.min.css">
    <link rel="stylesheet" type="text/css" href="//livestatic.videocc.net/v_92/assets/wjs/OwlCarousel2/dist/assets/owl.theme.default.min.css">
    <link rel="stylesheet" type="text/css" href="//livestatic.videocc.net/v_92/assets/wjs/jquery.barrager/css/barrager.css">
</head>
<body>
<div class="container pos-rel">
    <div class="ppt-canvas-block pos-rel">
        <div class="player-countdown" id="player-countdown">
            <div class="countdown-content">
                <div>距离直播开始还有：</div>
                <span><span class="times player-days">00</span> 天 <span class="times player-hours">00</span> 小时 <span class="times player-minutes">00</span> 分钟 <span class="times player-seconds">00</span> 秒</span>
            </div>
        </div>
        <img id="nolive" src="//livestatic.videocc.net/v_92/assets/wimages/pptClientWatch_images/mobile/nolive.png" width="100%">
        <div class="loading-ppt">
            <div class="loadcire"><span></span><span></span><span></span></div>
            <p>正在加载中，请稍后</p>
        </div>
        <img id="pptPics" class="ppt-pics" src="//livestatic.videocc.net/v_92/assets/wimages/pptClientWatch_images/mobile/nolive.png">
        <div id="DMContainer"></div>
        <div class="pos-abs controls-bar-wrap clearfix" data-status="show" id="js-controls-bar">
            <div class="pos-abs progress-bar">
                <div class="pos-abs progress-bg"></div>
                <div class="pos-abs buffer-bar"></div>
                <i class="timeball"></i>
            </div><!-- 进度条 -->
            <div class="fl" id="play-btn-wrap">
                <span class="controls-bar-btn play-btn" data-status="pause"></span>
                <span id="replayTime"><span id="currentTime">00 : 00</span> / <span id="totalTime">00 : 00</span></span>
            </div><!-- 左边 -->
            <div class="fr" id="danmu-wrap">
                <span>弹幕</span>
                <span class="controls-bar-btn danmu-btn" data-status="open"></span>
            </div><!-- 右边 -->
        </div>
        <div class="play-btn-big"></div>
        <div id="t_camera" class="t_camera t_camera_show">
            <div id="t_camera_content" style="width: 100%;height: 100%;"></div>
        </div><!-- 教师摄像头 -->
    </div><!-- 视频区域 -->

    <div class="tab-wrap">
        <div class="announcement-wrap">
            <div class="announcement" id="announcement">
                <div class="announcement-title">
                    公告
                </div>
                <div class="announcement-content">
                    <div class="content"></div>
                    <div class="ensure">
                        <div class="ensureBtn" type="button">我知道了</div>
                    </div>
                </div>
            </div>
        </div>
        <div class="mobile-signed">
            <div>
                <div class="signed-head">签到</div>
                <div class="signed-content">
                    <div><span class="signed-time">00</span> 秒</div>
                    <li class="sign-message">各位同学开始签到了</li>
                    <span class="btn-signed">签到</span>
                </div>
            </div>
        </div>
        <div class="signed-success"><span>签到成功</span></div>
        <ul class="mob-nav-list clearfix">
            <li><a href="javascript:;" class="mob-nav-active" data-target="#chat-wrap">互动聊天</a></li>
            <li><a href="javascript:;" data-target="#askQuestion-wrap">咨询提问</a></li>
        </ul>
        <div class="chat-wrap" id="chat-wrap">
            <a class="look-more" id="lookMore">查看更多...</a>
            <div class="chat-list-wrap pos-rel" id="chat-list-wrap">
                <ul id="talkList"></ul>
                <div class="new-msg">有更多新消息，点击查看</div>
            </div>
            <div class="pos-abs chat-main">
                <div class="pos-rel" style="width: 100%;height: 100%;padding: 10px 52px 10px 82px;">
                    <input type="text" class="mobile-input" id="chatipt" name="name" value="" placeholder="我也来聊几句...">
                    <span class="chat-icon emotions" id="expression"></span>
                    <span class="chat-icon flower" id="gift-flower"></span>
                    <span class="chat-icon more" id="more"></span>
                    <span class="send" id="send">发送</span>
                </div>
                <div class="audio-tip" id="audio-tip">若视频全屏播放，可在更多中切换为音频模式后观看</div>
            </div>
            <div class="facemain-layer" data-status="hide">
                <ul class="owl-carousel owl-theme" id="facemain"></ul>
            </div>
            <div class="more-layer" data-status="hide">
                <ul class="more-func-list clearfix">
                    <li>
                        <span class="icon-func teacher-only" data-status="false" id="teacher-only"></span>
                        <span>只看老师</span>
                    </li>
                    <li>
                        <span class="icon-func audio" data-status="audio"></span>
                        <span>音频模式</span>
                    </li>
                </ul>
            </div>
            <div class="QA-wrap">
                <div class="QA-header">
                    <span class="icon-close" id="QA-close">&times;</span>
                    <span>请选择答案（<span id="QA-type"></span>）</span>
                </div>
                <div class="QA-body">
                    <ul class="QA-answers-list" id="QA-answers-list"></ul>
                    <button type="button" class="splash_btn QA-submit-btn" id="QA-submit-btn" disabled>确认提交</button>
                </div>
            </div>
        </div>
        <div class="ask-question-wrap askQuestion-wrap mobile" id="askQuestion-wrap">
            <div class="wrap">
                <div class="talk-wrp">
                    <div class="talk-contain-m chat_list" id="talk_aq">
                        <ul class="talk-list" id="talkList_aq">
                        </ul>
                    </div>
                </div>
                <div class="talk-ipt talk-ipt-m">
                    <div class="talk-iwrp" id="sendMsgWrap_aq">
                        <span class="icon faceicon chat-icon emotions" id="faceicon_aq"></span>
                        <input type="text" id="chatipt_aq" class="chatipt" name="name" value="" placeholder="我想问讲师...">
                        <span class="send" id="send_aq">发送</span>
                    </div>
                    <div class="facemain-layer facewrp" data-status="hide">
                        <ul class="owl-carousel owl-theme" id="facemain_aq"></ul>
                    </div>
                </div>
            </div>
        </div>
        <div class="tab-float-layer set-nick-modal" id="set-nick-modal">
            <div class="tab-float-layer-hd">
                <span class="reward-close" id="cancel-setnick">&times;</span>
                <h1>输入聊天昵称</h1>
            </div>
            <div class="tab-float-layer-bd">
                <form class="polyv-form">
                    <div>
                        <input type="text" id="diy-nick-name" value="" class="polyv-form-control" placeholder="请输入聊天昵称">
                        <button type="button" class="btn btn-info" id="sure-setnick">确定</button>
                    </div>
                    <div id="setting-msg" class="setting-msg"></div>
                    <label style="font-size: 14px;">设置简单易记的名称有助于让大家认识你哦</label>
                </form>
            </div>
        </div>
    </div>
    <div class="tab-float-layer kick-tip-wrap" id="kick-tip-wrap">
        <div class="tab-float-layer-content">
            <div class="tab-float-layer-hd">
                <h1>温馨提示</h1>
            </div>
            <div class="tab-float-layer-bd">
                <div>
                    <p class="tip-icon"></p>
                    <p>您未被授权观看本直播</p>
                </div>
            </div>
        </div>
    </div>

</div>
<script src="//livestatic.videocc.net/v_92/assets/wjs/jquery/jquery-2.2.3.min.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/dist/socket.io.2.0.4.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/src/socket-queueManager.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/src/socket-queue.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/OwlCarousel2/dist/owl.carousel.min.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/pptwatch.emotions.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/pptClientWatchMobile.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/dist/chat.min.js"></script>

<script src="//res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script src="https://player.polyv.net/livescript/liveplayer.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/jquery.barrager/js/jquery.barrager.min.js"></script>
<script src="//livestatic.videocc.net/v_92/assets/wjs/dist/base64.min.js"></script>
<script type="text/javascript">
    var userinfo = {
        "userId": "1514346195726",
        "userName": "北京观众/92297",
        "pic": "//livestatic.videocc.net/v_92/assets/wimages/missing_face.png",
        "roomName": "145206",
        "userType": "slice"
    };
    var nicknamePrefix = "观众";
    var hasQuiz = true;
    var chatToken="a0743925-9aaa-4964-a815-3e43deb04520";
    var channelId = "145206";
    var onlyTeacher = false;
    var canSendBarr = true;
    var isStartPlay=false;
    var mode = 'ppt';
    var pulltime = 0;
    var pushtime = 0;
    var isReplay = false;
    var livestatus = 'end';
    var startTime = 0;
    var endTime = 0;
    var hasPlaybackVideo = false;
    var vodUserStatus = false;
    var isDebug = "N";
    var banBarrageBtn = 'off';
    var channelSessionId = "ewqfj89wpr";
    var recordSessionId;
    var countTime = '';
    var hasRecord;
    var channelStream = "bd849659f420171214181540686"?"bd849659f420171214181540686":"bd849659f420171214181540686";
    //开启倒计时
    var countOpen;
    countTime = '2017/12/15 14:30';
    countOpen = true;
    //是否设置暖场、回放并开启了倒计时
    var videoOpen;
    videoOpen = false;


    var player_code = Base64.encodeURI('北京观众/92297');
    var player = polyvObject('#t_camera_content').livePlayer({
        'width':'100%',
        'height':'100%',
        'vid':'145206',
        'uid':'bd849659f4',
        'forceHTML5':true,
        'param1':'1514346195726',
        'param2':'北京观众/92297',
        'banBarrageBtn': banBarrageBtn,
        'vrHead': "//livestatic.videocc.net/v_92",
        'autoplay': false,
        'hideBar': true,
        'ban_ad': true,
        'banpassword': true,
        'usePptMode': true
    });

    //回看显示进度条和时间
    if(isReplay){
        $('.progress-bar,#replayTime').show();
    }

    //视频开始播放时获取拉流时间
    function s2j_onStartPlay(){
        isStartPlay=true;
        $.ajax({
            url: '//v3.polyv.net/fun/timestamp',
            type: 'get',
            dataType: 'jsonp',
            success: function(json){
                pulltime = json.ts * 1000;
            },
            error: function(err){
                console.log(err);
            }
        })
    }
    //拖动摄像头
    var tCamera = $('#t_camera')[0];
    var movexMax = document.body.clientWidth - 150;
    var moveyMax = document.body.clientHeight - 105;
    var isdrag = false;
    var tx;
    var ty;
    var x;
    var y;
    tCamera.addEventListener('touchstart',function(event){
        event.stopPropagation();
        event.preventDefault();
        var touches = event.touches[0];
        isdrag = true;
        tx = parseInt(tCamera.offsetLeft);
        ty = parseInt(tCamera.offsetTop);
        x = touches.pageX;
        y = touches.pageY;
    });
    tCamera.addEventListener('touchmove',function(event){
        event.stopPropagation();
        event.preventDefault();
        var touches = event.touches[0];
        endx = touches.pageX;
        if (isdrag){
            var n = tx + touches.pageX - x;
            var m = ty + touches.pageY - y;
            $("#t_camera").css({
                "left":n,
                "top":m
            });
        }
    });
    tCamera.addEventListener('touchend',function(event){
        event.stopPropagation();
        event.preventDefault();
        isdrag = false;
        if(tCamera.offsetLeft<0){
            tCamera.style.left = 0;
        }
        if(tCamera.offsetLeft>movexMax){
            tCamera.style.left = movexMax + 'px';
        }
        if(tCamera.offsetTop<0){
            tCamera.style.top = 0;
        }
        if(tCamera.offsetTop>moveyMax){
            tCamera.style.top = moveyMax + 'px';
        }
    });

    //学员是否切换为音频模式
    var isStudentCloseCam = false;
    //音视频切换
    function changeAudioVideo(type)
    {
        player.switchMMode(type);
    }

    //回看列表
    var timerControls = null;
    var controlsBarWrap = $('.controls-bar-wrap');
    function hideControlBar(time){
        clearTimeout(timerControls);
        timerControls = null;
        if(time){
            timerControls = setTimeout(function(){
                clearTimeout(timerControls);
                timerControls = null;
                controlsBarWrap.slideUp().data('status','hide');
                $('.ppt-canvas-wrap').css('padding-bottom',0);
            },time);
        }else{
            controlsBarWrap.slideUp().data('status','hide');
        }
    }




    var logoEnabled = 'Y';
    var logoPc = 'Y';
    var logoMobile = 'Y';
    var hasWarmUpFlv = false;

    //弹幕开始====
    function j2s_setBarrage() {
        return true;
    }

    function j2s_showBarrage() {
        if(player != undefined && player.j2s_hideBarrage!= undefined) {
            player.j2s_showBarrage();
        }
    }

    function j2s_addBarrageMessage(_str) {
        if(player != undefined && player.j2s_addBarrageMessage!= undefined) {
            player.j2s_addBarrageMessage(_str);
        }
    }


    function j2s_hideBarrage() {
        if(player != undefined && player.j2s_addBarrageMessage!= undefined) {
            player.j2s_hideBarrage();
        }
    }

    function setBarrageStatus(boo) {
        if(boo) {
            canSendBarr = false;
            $('#danmu-wrap').hide();
        } else {
            canSendBarr = true;
            $('#danmu-wrap').show();
        }
    }

    function sendBarrage(str) {
        if(canSendBarr) {
            var danmuData = '[{"msg":"'+str+'","fontSize":"14","fontColor":"0xffffff","fontMode":"roll"}]';
            j2s_addBarrageMessage(danmuData);
        }
    }
    //===弹幕结束====

    var replayHistoryMessage = false;

    var smallClassEnable = false;

    var marqueeEnabled  = true;

</script>
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?25347ad3e9a43a8534d9fd8e2b69a04b";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
    })();
</script>
</body>
</html>
